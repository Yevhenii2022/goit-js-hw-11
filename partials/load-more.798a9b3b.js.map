{"mappings":"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","sources":["src/js/load-more.js"],"sourcesContent":["import Notiflix from 'notiflix';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { ImagesAPI } from './fetch-images';\n\nconst formEl = document.getElementById('search-form');\nconst galleryEl = document.querySelector('.gallery');\nconst loadMoreBtnEl = document.querySelector('.load-more');\n\nconst imagesAPI = new ImagesAPI();\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: '250',\n});\n\nisLoadMoreBtnShow(false);\n\nformEl.addEventListener('submit', handleFormElSubmit);\nloadMoreBtnEl.addEventListener('click', handleLoadMoreBtnElClick);\n\nasync function handleFormElSubmit(event) {\n  event.preventDefault();\n\n  isLoadMoreBtnShow(false);\n\n  galleryEl.innerHTML = '';\n\n  imagesAPI.page = 1;\n\n  imagesAPI.query = event.currentTarget.elements.searchQuery.value.trim();\n\n  if (imagesAPI.query === '') {\n    notifySearchNameAbsence();\n    return;\n  }\n\n  try {\n    const { hits: images, totalHits: totalQuantity } =\n      await imagesAPI.getImages();\n\n    if (!totalQuantity) {\n      notifyIncorrectQuery();\n      return;\n    }\n\n    showAmountOfHits(totalQuantity);\n\n    renderGalleryList(images);\n\n    if (totalQuantity < imagesAPI.page * imagesAPI.per_page) {\n      isLoadMoreBtnShow(false);\n      notifyEndOfGallery();\n      return;\n    }\n\n    isLoadMoreBtnShow(true);\n  } catch (error) {\n    console.log(error);\n    notifyQueryError(error);\n  }\n}\n\nasync function handleLoadMoreBtnElClick(event) {\n  imagesAPI.page += 1;\n\n  try {\n    const { hits: images, totalHits: totalQuantity } =\n      await imagesAPI.getImages();\n\n    renderGalleryList(images);\n\n    autoScrollPage();\n\n    if (totalQuantity < imagesAPI.page * imagesAPI.per_page) {\n      isLoadMoreBtnShow(false);\n      notifyEndOfGallery();\n    }\n  } catch (error) {\n    notifyQueryError(error);\n  }\n}\n\nfunction renderGalleryList(gallerys) {\n  const markup = gallerys\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<div class=\"photo-card\">\n        <a class=\"photo-card__item\" href=\"${largeImageURL}\">\n          <div class=\"photo-card__tumb\">\n            <img class=\"photo-card__img\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n          </div>\n          <div class=\"info\">\n            <p class=\"info-item\">\n              <b class=\"info-item__param\">Likes</b>\n              <span class=\"info-item__num\">${likes}</span>\n            </p>\n            <p class=\"info-item\">\n              <b class=\"info-item__param\">Views</b>\n              <span class=\"info-item__num\">${views}</span>\n            </p>\n            <p class=\"info-item\">\n              <b class=\"info-item__param\">Comments</b>\n              <span class=\"info-item__num\">${comments}</span>\n            </p>\n            <p class=\"info-item\">\n              <b class=\"info-item__param\">Downloads</b>\n              <span class=\"info-item__num\">${downloads}</span>\n            </p>\n          </div>\n        </a>\n      </div>`\n    )\n    .join('');\n\n  galleryEl.insertAdjacentHTML('beforeend', markup);\n\n  lightbox.refresh();\n}\n\nfunction isLoadMoreBtnShow(boolean) {\n  loadMoreBtnEl.style.display = boolean ? 'block' : 'none';\n}\n\nfunction notifyIncorrectQuery() {\n  Notiflix.Notify.failure(\n    'Sorry, there are no images matching your search query. Please try again.',\n    {\n      position: 'center-center',\n    }\n  );\n}\n\nfunction notifyEndOfGallery() {\n  Notiflix.Notify.info(\n    \"We're sorry, but you've reached the end of search results.\",\n    {\n      position: 'center-center',\n    }\n  );\n}\n\nfunction showAmountOfHits(totalHits) {\n  Notiflix.Notify.success(`Hooray! We found ${totalHits} images.`, {\n    position: 'center-center',\n  });\n}\n\nfunction notifyQueryError(error) {\n  Notiflix.Notify.failure(\n    `Oops! Something went wrong. You caught the following error: ${error.message}.`,\n    {\n      position: 'center-center',\n    }\n  );\n}\n\nfunction notifySearchNameAbsence() {\n  Notiflix.Notify.info(\n    'To search for pictures you need to specify what you are looking for.',\n    {\n      position: 'center-center',\n    }\n  );\n}\n\nfunction autoScrollPage() {\n  const { height: cardHeight } =\n    galleryEl.firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["$bpxeT","parcelRequire","$59bb3250e981eb05$var$formEl","document","getElementById","$59bb3250e981eb05$var$galleryEl","querySelector","$59bb3250e981eb05$var$loadMoreBtnEl","$59bb3250e981eb05$var$imagesAPI","$9P9rw","ImagesAPI","$59bb3250e981eb05$var$lightbox","$parcel$interopDefault","$5IjG7","captionsData","captionDelay","$59bb3250e981eb05$var$_handleFormElSubmit","$2TvXO","mark","_callee","event","ref","images","totalQuantity","preventDefault","$59bb3250e981eb05$var$isLoadMoreBtnShow","innerHTML","page","query","currentTarget","elements","searchQuery","value","trim","$59bb3250e981eb05$var$notifySearchNameAbsence","getImages","_ctx","sent","hits","totalHits","$59bb3250e981eb05$var$notifyIncorrectQuery","$59bb3250e981eb05$var$showAmountOfHits","$59bb3250e981eb05$var$renderGalleryList","per_page","$59bb3250e981eb05$var$notifyEndOfGallery","console","log","t0","$59bb3250e981eb05$var$notifyQueryError","apply","this","arguments","$59bb3250e981eb05$var$_handleLoadMoreBtnElClick","$59bb3250e981eb05$var$autoScrollPage","gallerys","markup","map","param","webformatURL","largeImageURL","tags","likes","views","comments","downloads","concat","join","insertAdjacentHTML","refresh","boolean","style","display","$6JpON","Notify","failure","position","info","success","error","message","cardHeight","firstElementChild","getBoundingClientRect","height","window","scrollBy","top","behavior","addEventListener"],"version":3,"file":"load-more.798a9b3b.js.map"}